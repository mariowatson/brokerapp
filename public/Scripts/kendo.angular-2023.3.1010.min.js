var __meta__={id:"angular",name:"AngularJS Directives",category:"framework",description:"Adds Kendo UI for AngularJS directives",depends:["core"],defer:!0};(function(n,t,i){"use strict";function nt(n){var t=o;try{return o=function(n){return n()},n()}finally{o=t}}function p(t,r,u,f,e,s){function d(){var y,i,b,o,s,c,l;return u.kRebind&&(y=n(n(r)[0].cloneNode(!0))),p=w(t,r,u,f,v).options,r.is("select")&&function(t){var i,r;if(t.length>0)for(i=n(t[0]),!/\S/.test(i.text())&&/^\?/.test(i.val())&&i.remove(),r=0;r<t.length;r++)n(t[r]).off("$destroy")}(r[0].options),i=v.call(r,h=p).data(f),et(i,t,u,f,e),t.$emit("kendoWidgetCreated",i),b=ht(t,i),u.kRebind&&lt(i,t,r,y,u.kRebind,b,u),u.kNgDisabled&&(o=u.kNgDisabled,s=t.$eval(o),s&&i.enable(!s),ut(i,t,r,o)),u.kNgReadonly&&(c=u.kNgReadonly,l=t.$eval(c),l&&i.readonly(l),ft(i,t,r,c)),u.kNgModel&&a(i,t,u.kNgModel),nt&&st(i,t,r,nt,at),i&&ct(i,r),i}var c,g,l,p,b,y,tt,it,rt,ot,k;if(!(r instanceof jQuery))throw new Error("The Kendo UI directives require jQuery to be available before AngularJS. Please include jquery before angular in the document.");c=u.kNgDelay;g=t.$eval(c);s=s||[];var nt=s[0],at=s[1],v=n(r)[f];if(!v)return window.console.error("Could not find: "+f),null;if(l=w(t,r,u,f,v),p=l.options,l.unresolved.length){for(b=[],y=0,tt=l.unresolved.length;y<tt;y++)it=l.unresolved[y],rt=n.Deferred(function(n){var r=t.$watch(it.path,function(t){t!==i&&(r(),n.resolve())})}).promise(),b.push(rt);n.when.apply(null,b).then(d);return}if(c&&!g){ot=t.$root||t;k=function(){var n=t.$watch(c,function(t){t!==i&&(n(),r.removeAttr(u.$attr.kNgDelay),c=null,o(d))})};/^\$(digest|apply)$/.test(ot.$$phase)?k():t.$apply(k);return}return d()}function w(r,u,f,e,o){function l(n,u){var f=t.copy(r.$eval(u));f===i?h.push({option:n,path:u}):s[n]=f}var w=e.replace(/^kendo/,""),h=[],c=f.kOptions||f.options,y=r.$eval(c),s,a,p,v;return c&&y===i&&h.push({option:"options",path:c}),s=t.extend({},f.defaultOptions,y),a=o.widget.prototype.options,p=o.widget.prototype.events,n.each(f,function(n,t){var u,f,i,r;n!=="source"&&n!=="kDataSource"&&n!=="kScopeField"&&n!=="scopeField"&&(u="data"+n.charAt(0).toUpperCase()+n.slice(1),n.indexOf("on")===0&&(f=n.replace(/^on./,function(n){return n.charAt(2).toLowerCase()}),p.indexOf(f)>-1&&(s[f]=t)),a.hasOwnProperty(u)?l(u,t):a.hasOwnProperty(n)&&!rt[n]?l(n,t):it[n]||(i=n.match(/^k(On)?([A-Z].*)/),i&&(r=i[2].charAt(0).toLowerCase()+i[2].slice(1),i[1]&&n!="kOnLabel"?s[r]=t:(n=="kOnLabel"&&(r="onLabel"),l(r,t)))))}),v=f.kDataSource||f.source,v&&(s.dataSource=tt(r,u,w,v)),s.$angular=[r],{options:s,unresolved:h}}function ut(n,t,i,r){if(kendo.ui.PanelBar&&n instanceof kendo.ui.PanelBar||kendo.ui.Menu&&n instanceof kendo.ui.Menu){s.warn("k-ng-disabled specified on a widget that does not have the enable() method: "+n.options.name);return}t.$watch(r,function(t,i){t!=i&&n.enable(!t)})}function ft(n,t,i,r){if(typeof n.readonly!="function"){s.warn("k-ng-readonly specified on a widget that does not have the readonly() method: "+n.options.name);return}t.$watch(r,function(t,i){t!=i&&n.readonly(t)})}function et(n,t,i,r,u){if(i[u]){var f=e(i[u]).assign;if(f)f(t,n);else throw new Error(u+" attribute used but expression in it is not assignable: "+i[r]);}}function ot(n){return/checkbox|radio/i.test(n.attr("type"))?n.prop("checked"):n.val()}function k(n){return b.test(n[0].tagName)}function st(n,t,r,f,e){var l,s,h,c,o;if(n.value){if(s=!1,l=k(r)?function(){return ot(r)}:function(){return n.value()},h=function(){var r=f.$viewValue;r===i&&(r=f.$modelValue);r===i&&(r=null);s=!0;setTimeout(function(){if(s=!1,n){var i=t[n.element.attr("k-ng-model")];i&&(r=i);n.options.autoBind!==!1||n.listView.bound()?n.value(r):r&&n.value(r)}},0)},f.$render=h,setTimeout(function(){f.$render!==h&&(f.$render=h,f.$render())}),k(r))r.on("change",function(){s=!0});c=function(n){return function(){var i;(!s||r.is("select"))&&(n&&e&&(i=e.$pristine),f.$setViewValue(l()),n&&(f.$setPristine(),i&&e.$setPristine()),u(t))}};n.first("change",c(!1));n.first("spin",c(!1));kendo.ui.AutoComplete&&n instanceof kendo.ui.AutoComplete||n.first("dataBound",c(!0));o=l();isNaN(f.$viewValue)||o==f.$viewValue||(f.$isEmpty(f.$viewValue)?o!=null&&o!==""&&o!=f.$viewValue&&f.$setViewValue(o):n.value(f.$viewValue));f.$setPristine()}}function a(t,r,f){var o,h,v,b,k;if(kendo.ui.DateRangePicker&&t instanceof kendo.ui.DateRangePicker){o=f.split(",");h=o[0].trim();a(t._startDateInput,r,h);o[1]?(v=o[1].trim(),a(t._endDateInput,r,v),t.range({start:r[h],end:r[v]})):t.range({start:r[h],end:null});return}if(typeof t.value!="function"){s.warn("k-ng-model specified on a widget that does not have the value() method: "+t.options.name);return}var g=n(t.element).parents("ng-form, form").first(),y=kendo.getter(g.attr("name"),!0)(r),c=e(f),nt=c.assign,p=!1,d=kendo.ui.MultiSelect&&t instanceof kendo.ui.MultiSelect||kendo.ui.RangeSlider&&t instanceof kendo.ui.RangeSlider,l=function(n){return n&&d?n.length:0},w=l(c(r));t.$angular_setLogicValue(c(r));b=function(n,r){(n===i&&(n=null),p||n==r&&l(n)==w)||(w=l(n),t.$angular_setLogicValue(n))};d?r.$watchCollection(f,b):r.$watch(f,b);k=function(){p=!0;y&&y.$pristine&&y.$setDirty();u(r,function(){nt(r,t.$angular_getLogicValue());w=l(c(r))});p=!1};t.first("change",k);t.first("spin",k)}function ht(n,t){var i=n.$on("$destroy",function(){i();t&&(kendo.destroy(t.element),t=null)});return i}function ct(t,i){function f(){u.disconnect()}function e(){u.observe(n(i)[0],{attributes:!0})}if(window.MutationObserver&&t.wrapper){var r=[].slice.call(n(i)[0].classList),u=new MutationObserver(function(i){(f(),t)&&(i.forEach(function(i){var f=n(t.wrapper)[0],u;switch(i.attributeName){case"class":u=[].slice.call(i.target.classList);u.forEach(function(n){r.indexOf(n)<0&&(f.classList.add(n),kendo.ui.ComboBox&&t instanceof kendo.ui.ComboBox&&t.input[0].classList.add(n))});r.forEach(function(n){u.indexOf(n)<0&&(f.classList.remove(n),kendo.ui.ComboBox&&t instanceof kendo.ui.ComboBox&&t.input[0].classList.remove(n))});r=u;break;case"disabled":typeof t.enable!="function"||t.element.attr("readonly")||t.enable(!n(i.target).attr("disabled"));break;case"readonly":typeof t.readonly!="function"||t.element.attr("disabled")||t.readonly(!!n(i.target).attr("readonly"))}}),e())});e();t.first("destroy",f)}}function lt(t,i,r,f,e,o,s){var h=i.$watch(e,function(u,e){var c,y;if(!t._muteRebind&&u!==e){h();s._cleanUp&&s._cleanUp();c=v[t.options.name];c&&c.forEach(function(t){var r=i.$eval(s["k"+t]);r&&f.append(n(r).attr(kendo.toHyphens("k"+t),""))});var l=n(t.wrapper)[0],a=n(t.element)[0],p=t.options.name==="Upload";p&&(r=n(a));y=r.injector().get("$compile");t._destroy();o&&o();t=null;a&&(l&&l.parentNode.replaceChild(a,l),n(r).replaceWith(f));y(f)(i)}},!0);u(i)}function d(n,t){return function(i,r){return n.call(t,i,r)}}function at(n,t){this[n]=kendo.stringify(t)}function pt(n,i){function e(n,t){f.directive(n,["directiveFactory",function(i){return i.create(t,n)}])}var r=i?"Mobile":"",o,u,s,h;(r+=n.fn.options.name,o=r,u="kendo"+r.charAt(0)+r.substr(1).toLowerCase(),r="kendo"+r,s=r.replace(/([A-Z])/g,"-$1"),yt.indexOf(r.replace("kendo",""))==-1&&(h=r===u?[r]:[r,u],t.forEach(h,function(n){f.directive(n,function(){return{restrict:"E",replace:!0,template:function(n,t){var i=vt[o]||"div",r=t.kScopeField||t.scopeField;return"<"+i+" "+s+(r?'="'+r+'"':"")+">"+n.html()+"<\/"+i+">"}}})})),g.indexOf(r.replace("kendo",""))>-1)||(e(r,r),u!=r&&e(u,r))}function wt(t){return t=n(t),kendo.widgetInstance(t,kendo.ui)||kendo.widgetInstance(t,kendo.mobile.ui)||kendo.widgetInstance(t,kendo.dataviz.ui)}function u(n,t){var i=n.$root||n,r=/^\$(digest|apply)$/.test(i.$$phase);t?r?t():i.$apply(t):r||i.$digest()}function bt(t,i){t.$destroy();i&&n(i).removeData("$scope").removeData("$$kendoScope").removeData("$isolateScope").removeData("$isolateScopeNoTemplate").removeClass("ng-scope")}function r(n,i,u){var e,f,o;if(Array.isArray(n))return t.forEach(n,function(n){r(n,i,u)});if(typeof n=="string"){for(e=n.split("."),f=kendo;f&&e.length>0;)f=f[e.shift()];if(!f)return c.push([n,i,u]),!1;n=f.prototype}return o=n[i],n[i]=function(){var n=this,t=arguments;return u.apply({self:n,next:function(){return o.apply(n,arguments.length>0?arguments:t)}},t)},!0}var b,c,v;if(t&&t.injector){var f=t.module("kendo.directives",[]),l=t.injector(["ng"]),e=l.get("$parse"),o=l.get("$timeout"),y,s=l.get("$log");var h,tt=function(){var t={TreeList:"TreeListDataSource",TreeView:"HierarchicalDataSource",Scheduler:"SchedulerDataSource",PivotGrid:"PivotDataSource",PivotConfigurator:"PivotDataSource",PanelBar:"HierarchicalDataSource",Menu:"$PLAIN",ContextMenu:"$PLAIN"},n=function(n,t){return t=="$PLAIN"?n:kendo.data[t].create(n)};return function(i,r,u,f){var o=t[u]||"DataSource",e=i.$eval(f),s=n(e,o);return i.$watch(f,function(t){var i=wt(r),u;i&&typeof i.setDataSource=="function"&&t!==e&&t!==i.dataSource&&(u=n(t,o),i.setDataSource(u),e=t)}),s}}(),it={kDataSource:!0,kOptions:!0,kRebind:!0,kNgModel:!0,kNgDelay:!0},rt={name:!0,title:!0,style:!0};b=/^(input|select|textarea)$/i;f.factory("directiveFactory",["$compile",function(t){var i,r=!1,u;return y=t,u=function(t,u){return{restrict:"AC",require:["?ngModel","^?form"],scope:!1,controller:["$scope","$attrs","$element",function(n,t){this.template=d(at,t);t._cleanUp=d(function(){this.template=null;t._cleanUp=null},this)}],link:function(f,e,o,s){var h=n(e),c=t.replace(/([A-Z])/g,"-$1"),l;(h.attr(c,h.attr("data-"+c)),h[0].removeAttribute("data-"+c),l=p(f,e,o,t,u,s),l)&&(i&&clearTimeout(i),i=setTimeout(function(){f.$emit("kendoRendered");r||(r=!0,n("form").each(function(){var t=n(this).controller("form");t&&t.$setPristine()}))}))}}},{create:u}}]);var vt={Editor:"textarea",NumericTextBox:"input",DatePicker:"input",DateTimePicker:"input",TimePicker:"input",AutoComplete:"input",ColorPicker:"input",MaskedTextBox:"input",MultiSelect:"input",Upload:"input",Validator:"form",Button:"button",ListView:"ul",ScrollView:"div",PanelBar:"ul",TreeView:"ul",Menu:"ul",ContextMenu:"ul",ActionSheet:"ul",Switch:"input"},yt=[],g=[];t.forEach(["MobileScroller"],function(n){g.push(n);n="kendo"+n;f.directive(n,function(){return{restrict:"A",link:function(t,i,r){p(t,i,r,n,n)}}})});var kt=kendo.htmlEncode,dt=/{{/g,gt=/}}/g,ni="{&#8203;{",ti="}&#8203;}";kendo.htmlEncode=function(n){return kt(n).replace(dt,ni).replace(gt,ti)};c=[];kendo.onWidgetRegistered(function(t){c=n.grep(c,function(n){return!r.apply(null,n)});pt(t.widget,t.prefix=="Mobile")});r(["ui.Widget","mobile.ui.Widget"],"angular",function(r,f){var o=this.self,e;if(r=="init"){!f&&h&&(f=h);h=null;f&&f.$angular&&(o.$angular_scope=f.$angular[0],o.$angular_init(o.element,f));return}e=o.$angular_scope;e&&nt(function(){var s=f(),h=s.elements,l=s.data,c,a;if(h.length>0)switch(r){case"cleanup":t.forEach(h,function(t){var i=n(t).data("$$kendoScope");i&&i!==e&&i.$$kendoScope&&bt(i,t)});break;case"compile":c=o.element.injector();a=c?c.get("$compile"):y;t.forEach(h,function(t,r){var u,f;s.scopeFrom?u=s.scopeFrom:(f=l&&l[r],f!==i?(u=n.extend(e.$new(),f),u.$$kendoScope=!0):u=e);n(t).data("$$kendoScope",u);a(t)(u)});u(e)}})});r("ui.Widget","$angular_getLogicValue",function(){return this.self.value()});r("ui.Widget","$angular_setLogicValue",function(n){this.self.value(n)});r("ui.Select","$angular_getLogicValue",function(){var n=this.self.dataItem(),t=this.self.options.dataValueField;return n?this.self.options.valuePrimitive?t?n[t]:n:n.toJSON():null});r("ui.Select","$angular_setLogicValue",function(n){var t=this.self,r=t.options,f=r.dataValueField,u=r.text||"";n===i&&(n="");f&&!r.valuePrimitive&&n&&(u=n[r.dataTextField]||"",n=n[f||r.dataTextField]);t.options.autoBind!==!1||t.listView.bound()?t.value(n):!u&&n&&r.valuePrimitive?t.value(n):t._preselect(n,u)});r("ui.MultiSelect","$angular_getLogicValue",function(){var t=this.self.dataItems().slice(0),i=this.self.options.dataValueField;return i&&this.self.options.valuePrimitive&&(t=n.map(t,function(n){return n[i]})),t});r("ui.MultiSelect","$angular_setLogicValue",function(t){t==null&&(t=[]);var i=this.self,r=i.options,u=r.dataValueField,f=t;u&&!r.valuePrimitive&&(t=n.map(t,function(n){return n[u]}));r.autoBind!==!1||r.valuePrimitive||i.listView.bound()?i.value(t):i._preselect(f,t)});r("ui.Widget","$angular_init",function(n,t){var i=this.self,e,f,r,u;if(t&&!Array.isArray(t))for(e=i.$angular_scope,f=i.events.length;--f>=0;)r=i.events[f],u=t[r],u&&typeof u=="string"&&(t[r]=i.$angular_makeEventHandler(r,e,u))});r("ui.Widget","$angular_makeEventHandler",function(n,t,i){return i=e(i),function(n){u(t,function(){i(t,{kendoEvent:n})})}});r(["ui.Grid","ui.ListView","ui.TreeView","ui.PanelBar"],"$angular_makeEventHandler",function(n,i,r){return n!="change"?this.next():(r=e(r),function(n){var c=n.sender,l=c.options,a,v,f={kendoEvent:n},e,s,y,p,o,w,h;for(t.isString(l.selectable)&&(a=l.selectable.indexOf("cell")!==-1,v=l.selectable.indexOf("multiple")!==-1),c._checkBoxSelection&&(v=!0),e=f.selected=this.select(),s=f.data=[],y=f.columns=[],o=0;o<e.length;o++)w=a?e[o].parentNode:e[o],h=c.dataItem(w),a?(t.element.inArray(h,s)<0&&s.push(h),p=t.element(e[o]).index(),t.element.inArray(p,y)<0&&y.push(p)):s.push(h);v||(f.dataItem=f.data=s[0],f.angularDataItem=kendo.proxyModelSetters(f.dataItem),f.selected=e[0]);u(i,function(){r(i,f)})})});r("ui.Grid","$angular_init",function(r,u){if(this.next(),u.columns){var f=n.extend({},kendo.Template,u.templateSettings);t.forEach(u.columns,function(n){!n.field||n.template||n.format||n.values||n.encoded!==i&&!n.encoded||(n.template="<span ng-bind='"+kendo.expr(n.field,"dataItem")+"'>#: "+kendo.expr(n.field,f.paramName)+"#<\/span>")})}});v={TreeMap:["Template"],Grid:["AltRowTemplate","DetailTemplate","RowTemplate"],ListView:["EditTemplate","Template","AltTemplate"],Pager:["SelectTemplate","LinkTemplate"],PivotGrid:["ColumnHeaderTemplate","DataCellTemplate","RowHeaderTemplate"],Scheduler:["AllDayEventTemplate","DateHeaderTemplate","EventTemplate","MajorTimeHeaderTemplate","MinorTimeHeaderTemplate"],ScrollView:["Template"],PanelBar:["Template"],TreeView:["Template"],Validator:["ErrorTemplate"]},function(){var n={};t.forEach(v,function(i,r){t.forEach(i,function(t){n[t]||(n[t]=[]);n[t].push("?^^kendo"+r)})});t.forEach(n,function(n,t){var i="k"+t,r=kendo.toHyphens(i);f.directive(i,function(){return{restrict:"A",require:n,terminal:!0,compile:function(t,u){if(u[i]===""){t.removeAttr(r);var f=t[0].outerHTML;return function(t,u,e,o){for(var h;!h&&o.length;)h=o.shift();h?(h.template(i,f),u.remove()):s.warn(r+" without a matching parent widget found. It can be one of the following: "+n.join(", "))}}}}})})}()}})(window.kendo.jQuery,window.angular);