function isConnectionCurrent(n){return currentHub.id()==n}function autoCompleteComboBox_getDictionary(n){return $find(n.find('[id$="RadComboBox_Dictionary"]').first().attr("id"))}function autoCompleteComboBox_getDictionaryValidator(n){return n.find('[id$="RequiredFieldValidator_Dictionary"]').first().get(0)}function autoCompleteComboBox_clearDictionary(n){var t=autoCompleteComboBox_getDictionary(n);t.clearSelection();t.clearItems();n.hasClass("autocomplete-combobox")||(n=n.find(".autocomplete-combobox").first());n.attr("data-hasvalue","false")}function autoCompleteComboBox_setDictionary(n,t,i){var r=new Telerik.Web.UI.RadComboBoxItem,u;r.set_value(t);r.set_text(i);u=autoCompleteComboBox_getDictionary(n);u.trackChanges();u.get_items().add(r);r.select();u.commitChanges();n.hasClass("autocomplete-combobox")||(n=n.find(".autocomplete-combobox").first());n.attr("data-hasvalue","true")}function autoCompleteComboBox_clientLoad(n){var t=n.get_text(),i=n.get_value();$.trim(t)!=""&&(n.get_element().title=t);$("#"+$(n.get_element()).parent().attr("id")).attr("data-hasvalue",i!="")}function autoCompleteComboBox_clientSelectedIndexChanged(n,t){var i=!1;t._item!=null&&(n.get_element().title=t._item._text,i=t._item._text!="");$("#"+$(n.get_element()).parent().attr("id")).attr("data-hasvalue",i)}function autoCompleteComboBox_clientBlur(n){var i=n.get_text(),t=n.findItemByText(i);t||(n.set_text(""),n.get_element().title="");$("#"+$(n.get_element()).parent().attr("id")).attr("data-hasvalue",t!=null)}function Object_clone(n){return n?JSON.parse(JSON.stringify(n)):null}function String_isNullOrWhiteSpace(n){return!n||!n.trim()}function String_base64ToBytes(n){const t=atob(n);return Uint8Array.from(t,function(n){return n.codePointAt(0)})}function String_fromUtf8Base64(n){const t=new TextDecoder;return t.decode(String_base64ToBytes(n))}function String_toByteString(n,t=", "){return n?Array.from(n).map(n=>n.charCodeAt(0)).join(t):""}function chainPromises(...n){return n.reduce(function(n,t){return n.then(function(n){const i=typeof t=="function"?t():t;return i.then(function(t){return[...n,t]})})},Promise.resolve([]))}function whenSequential(...n){return $.when(chainPromises(...n))}var enableSignalR=!0,siteHubServer,siteHubClient,currentHub={id:function(){return $.connection.hub.id},isConnected:function(){return $.connection.hub.state===$.signalR.connectionState.connected},start:function(){$.connection.hub.start()},stop:function(){$.connection.hub.stop()},events:{onInitClient:"onInitClient.siteHub",onStateChanged:"onStateChanged.siteHub"},initClient:function(n){$(document).on(currentHub.events.onInitClient,function(t,i){n(i)})},stateChanged:function(n){$(document).on(currentHub.events.onStateChanged,function(t,i,r){n(i,r)})}},currentIdentity,currentPage;$(function(){if(enableSignalR){var n=$.connection.siteHub;siteHubServer=n.server;siteHubClient=n.client;$.event.trigger(currentHub.events.onInitClient,[siteHubClient]);$.connection.hub.stateChanged(function(n){$.event.trigger(currentHub.events.onStateChanged,[n,{0:"connecting",1:"connected",2:"reconnecting",4:"disconnected"}])});window.addEventListener("beforeunload",function(){currentHub.stop()});currentHub.start()}});currentIdentity={_isCollaborator:null,_isCollaborator_TypeA:null,_isCollaborator_TypeB:null,_isManager:null,_isManager_TypeA:null,_isManager_TypeB:null,_isManager_TypeC:null,_isBroker:null,_isCompany:null,init:function(n,t,i,r,u,f,e,o,s){currentIdentity._isCollaborator=n;currentIdentity._isCollaborator_TypeA=t;currentIdentity._isCollaborator_TypeB=i;currentIdentity._isManager=r;currentIdentity._isManager_TypeA=u;currentIdentity._isManager_TypeB=f;currentIdentity._isManager_TypeC=e;currentIdentity._isBroker=o;currentIdentity._isCompany=s},isCollaborator:function(){return currentIdentity._isCollaborator==!0},isCollaborator_TypeA:function(){return currentIdentity._isCollaborator_TypeA==!0},isCollaborator_TypeB:function(){return currentIdentity._isCollaborator_TypeB==!0},isManager:function(){return currentIdentity._isManager==!0},isManager_TypeA:function(){return currentIdentity._isManager_TypeA==!0},isManager_TypeB:function(){return currentIdentity._isManager_TypeB==!0},isManager_TypeC:function(){return currentIdentity._isManager_TypeC==!0},isManagerSupervisor:function(){return currentIdentity.isManager_TypeA()&&currentIdentity.isManager_TypeB()&&currentIdentity.isManager_TypeC()},isBroker:function(){return currentIdentity._isBroker==!0},isCompany:function(){return currentIdentity._isCompany==!0},delegator:{_type:null,_id:null,_name:null,_nodeId:null,_rootId:null,_rootNodeId:null,init:function(n,t,i,r,u,f){currentIdentity.delegator._type=n;currentIdentity.delegator._id=t;currentIdentity.delegator._name=i;currentIdentity.delegator._nodeId=r;currentIdentity.delegator._rootId=u;currentIdentity.delegator._rootNodeId=f},type:function(){return currentIdentity.delegator._type},id:function(){return currentIdentity.delegator._id},name:function(){return currentIdentity.delegator._name},nodeId:function(){return currentIdentity.delegator._nodeId},rootId:function(){return currentIdentity.delegator._rootId},rootNodeId:function(){return currentIdentity.delegator._rootNodeId}}};currentPage={it_IT:"it-IT",_globalCulture:null,_currentCulture:null,init:function(n,t){currentPage._globalCulture=n;currentPage._currentCulture=t},getGlobalCulture:function(){return currentPage._globalCulture},getCurrentCulture:function(){return currentPage._currentCulture},isITCultureGlobal:function(){return currentPage.getGlobalCulture()==currentPage.it_IT},isITCultureCurrent:function(){return currentPage.getCurrentCulture()==currentPage.it_IT},showElement:function(n,t){n!=null&&(t?n.show():n.hide())},showMessage:function(n,t,i,r){var f=i!=null,u;f&&(u=t!=null?"<em><strong>"+t+"<\/strong><\/em>":"",t!=null&&i!=""&&(u+="<br/>"),u+=i,n.html(u),r?n.addClass("error"):n.removeClass("error"));currentPage.showElement(n,f)},manageExpandCollapse:function(){$(".container-expand-collapse").each(function(){var i,r;if(!$(this).next().hasClass("hellip-link")){var t=45,u="&hellip;",f="Leggi",e="<i class='fas fa-minus'><\/i>",o="Chiudi",n=$(this);n.css({overflow:"hidden",height:t+"px"});i=$('<a href="#" title='+f+">"+u+"<\/a>");r=$('<div class="hellip-link"><\/div>');r.append(i);$(this).after(r);i.click(function(i){i.preventDefault();n.height()>t?($(this).html(u),$(this).prop("title",f),n.css("height",t+"px")):($(this).html(e),$(this).prop("title",o),n.css("height","auto"))})}})},navigateToPage:function(n){const t=window.open("Logincd6d.html","_blank");setTimeout(function(){n(t)},500)},initNavigation:function(n){currentPage.panelsStack=[];currentPage.pushPanel(n)},navigateTo:function(n,t,i,r,u){var f=currentPage.getCurrentPanel();currentPage.pushPanel(n);currentPage.navigate(f,n,t,i,r,u)},navigateBack:function(n,t,i,r){var u=currentPage.popPanel(),f;u!=null&&(f=currentPage.getCurrentPanel(),currentPage.navigate(u,f,n,t,i,r))},run:function(n,t,i,r){var u=currentPage.getCurrentPanel(),f=u;currentPage.navigate(u,f,n,t,i,r)},panelsStack:null,getCurrentPanel:function(){if(currentPage.panelsStack==null)throw"call initNavigation first";return currentPage.panelsStack[currentPage.panelsStack.length-1]},pushPanel:function(n){if(currentPage.panelsStack==null)throw"call initNavigation first";currentPage.panelsStack.push(n)},popPanel:function(){if(currentPage.panelsStack==null)throw"call initNavigation first";return currentPage.panelsStack.length>1?currentPage.panelsStack.pop():null},navigate:function(n,t,i,r,u,f){function e(){t.fadeIn("fast",function(){typeof f!="undefined"&&f!=null&&f(t)})}n.fadeOut("fast",function(){if(typeof i!="undefined"&&i!=null){var n=i(t);typeof n!="undefined"&&n!=null?typeof n.done!="undefined"?typeof u!="undefined"&&u!=null?u.fadeIn("fast",function(){n.done(r).done(function(){u.fadeOut("fast",function(){e()})})}):n.done(r).done(function(){e()}):e():e()}else e()})},bindDataToGrid:function(n,t,i,r){if(n!=null){var u=n.get_masterTableView();r&&u.set_currentPageIndex(0);u.set_virtualItemCount(i);u.set_dataSource(t);u.dataBind()}},getDictionary:function(n){return autoCompleteComboBox_getDictionary(n)},getDictionaryValidator:function(n){return autoCompleteComboBox_getDictionaryValidator(n)},clearDictionary:function(n){autoCompleteComboBox_clearDictionary(n)},setDictionary:function(n,t,i){autoCompleteComboBox_setDictionary(n,t,i)},getFileBase64:function(n,t){if(n.length&&n[0]){var i=new FileReader;i.onload=function(i){t(i.target.result,n[0].name)};i.readAsDataURL(n[0])}else t(null,null)},getFileAsArrayBuffer:function(n,t){if(n.length&&n[0]){var i=new FileReader;i.onload=function(){var r=i.result,u=new Uint8Array(r);t(u,n[0].name)};i.readAsArrayBuffer(n[0])}else t(null,null)},enableValidator:function(n,t){n!=null&&(ValidatorEnable(n,t),currentPage.setValidator(n,!0))},setValidator:function(n,t){n!=null&&(n.isvalid=t,ValidatorUpdateDisplay(n))},resetValidators:function(){var n,t;if(typeof Page_Validators!="undefined")for(n=0;n<Page_Validators.length;n++)t=Page_Validators[n],t.isvalid=!0,ValidatorUpdateDisplay(t);Page_ClientValidate("9F3449A4738B46D4A60EB4F8D51FF323")},alertWnd:null,alert:function(n,t,i,r,u){currentPage.alertWnd=radalert(t,r,u,n,i,null)},confirmWnd:null,confirm:function(n,t,i,r,u){currentPage.confirmWnd=radconfirm(t,i,r,u,null,n)},promptWnd:null,prompt:function(n,t,i,r,u){currentPage.promptWnd=radprompt(t,i,r,u,null,n)},closeAllPopup:function(){currentPage.alertWnd!=null&&currentPage.alertWnd.close();currentPage.confirmWnd!=null&&currentPage.confirmWnd.close();currentPage.promptWnd!=null&&currentPage.promptWnd.close()},downloadFile:function(){var n="/FileManager.ashx?Document="+btoa(Array.from(arguments).join("|"));window.open(n,"_blank")},getValue:function(n){return n!=null&&n!=""?n:"-"},getEmailLink:function(n){return n!=null&&n!=""?'<a href="mailto:'+n+'" target="_blank">'+n+"<\/a>":"-"},getCapAndMunicipality:function(n,t){return t!=null&&t!=""?n+" "+t:"-"}};String.prototype.format=function(){a=this;for(k in arguments)a=a.replace("{"+k+"}",arguments[k]);return a};String.prototype.getIcon=function(){a=this;var n=a.substr(a.lastIndexOf(".")+1).toLowerCase();switch(n){case"pdf":return'<i class="far fa-file-pdf"><\/i>';case"oxps":case"xps":return'<i class="far fa-paper-plane"><\/i>';case"docx":case"docm":case"doc":case"rtf":case"txt":case"odt":return'<i class="far fa-file-word"><\/i>';case"xlsx":case"xlsm":case"xls":case"csv":case"ods":return'<i class="far fa-file-excel"><\/i>';case"png":case"jpg":return'<i class="far fa-file-image"><\/i>';case"zip":case"rar":case"7z":return'<i class="far fa-file-archive"><\/i>';default:return'<i class="far fa-file"><\/i>'}};$(function(){$(".only-manager").each(function(){currentIdentity.isManager()||$(this).html("")})}),function(n,t){if(typeof define=="function"&&define.amd)define(["jquery"],t);else if(typeof exports!="undefined"){var i=require("jquery");module.exports=t(i)}else t(n.jQuery)}(this,function(n){"use strict";var t=n.event.special.singleclick={bindType:"click",delegateType:"click",handle:function(t){function r(){var n=navigator.userAgent;return n.indexOf("MSIE ")>-1||n.indexOf("Trident/index.html")>-1}var i=n(this);t=n.Event(t.type,t);t.type=t.handleObj.origType;(t.detail===1||r())&&t.handleObj.handler.apply(i,arguments);t.type=t.handleObj.type}};return n});const easyfintech={isAvailable:function(){return currentIdentity.isManager()||currentIdentity.isCollaborator()},isPurchaseAnalysisAvailable:function(n,t){switch(n){case"EASYBOND_SCORE":return t;case"EASYCHECK":return t&&currentPage.isITCultureGlobal();default:return!1}},isAnalystOverrideAvailable:function(n,t,i){const u=new Date,r=new Date(t);r.setDate(r.getDate()+i);switch(n){case"EASYBOND_SCORE":return u<=r;default:return!1}},addManualBalanceToAnalysis:function(n,t,i){return new Promise(function(r,u){Site.Server.Contractor_Easyfintech_AddManualBalanceToAnalysis(n,t,i,function(n){r(n)},function(n){u(n)})})},evalContractorRiskCeiling:function(n){return n?n.MasterData.RiskCeiling:null},evalContractorFinancialCapacity:function(n){return n?n.MasterData.FinancialCapacity:null},evalContractorCapacityRatio:function(n){return n?easyfintech.evalCapacityRatio(n.MasterData.RiskCeiling,n.MasterData.FinancialCapacity):null},evalCapacityRatio:function(n,t){return n>0&&t!=null?t/n*100:null},getContractorFinancialCapacityClass:function(n){return easyfintech.getFinancialCapacityClass(n.MasterData.RiskCeiling,n.MasterData.FinancialCapacity)},getFinancialCapacityClass:function(n,t){if(n!=null&&t!=null){let i=n/t;return i<=.6?"alert-success":i<=.8?"alert-warning":"alert-danger"}return"alert-secondary"},getResidualRiskCeiling:function(n,t){return n!=null||t!=null?n-t:null},getResidualRiskCeilingClass:function(n){return n!=null?n>=0?"alert-success":"alert-danger":"alert-secondary"},EASYBOND_SCORE:{get_score_letter_class:function(n){return n.replaceAll("+","p").replaceAll("-","m")},isAnalystOverrideVisible:function(n){return!((!n.Analyst_value||n.Analyst_value==0)&&String_isNullOrWhiteSpace(n.Analyst_note)&&n.Field.no_general_haircuts!=!0)},getAnalystOverrideValue:function(n){return n.Analyst_value>0?`+${n.Analyst_value}`:n.Analyst_value},isManualBalanceValid:function(n){return n.Field.manual_balance==1&&n.Field.oldKPI!=!0}},EASYCHECK:{getValues:function(n,t){const r=function(){const t=n.Value.AbbreviatedFinancialStatements?.length;return t>0?new Array(t):null},i=n.Value.BalanceSheetRatios?.[t];return i?i.values:r()}},SP_FLASH:{get_more_score_label:function(n){switch(n){case 0:return"---";case 1:return"D";case 2:return"C";case 3:return"CC";case 4:return"CCC";case 5:return"B";case 6:return"BB";case 7:return"BBB";case 8:return"A";case 9:return"AA";case 10:return"AAA";default:return""}},get_more_score_class:function(n){switch(n){case 0:return"inactive-company";default:return easyfintech.SP_FLASH.get_more_score_label(n)}}},SV2:{get_score_class:function(n){switch(n){case"R":return"alert-danger";case"Y":return"alert-warning";case"G":return"alert-success";default:return"alert-dark"}}}},angularJSApp={run:function(n,t,i){$("#"+n).each(function(){const u=n+"_Controller";$(this).attr("ng-controller",u);const r=angular.module(n,["ngSanitize","kendo.directives"]);r.directive("convertToNumber",function(){return{require:"ngModel",link:function(n,t,i,r){r.$parsers.push(function(n){return parseInt(n,10)});r.$formatters.push(function(n){return n!=null?""+n:""})}}});r.directive("dateGreaterThanEqual",function(){return{require:"ngModel",scope:{otherModelValue:"=dateGreaterThanEqual"},link:function(n,t,i,r){r.$validators.dateGreaterThanEqual=function(t){function i(n){let t=dateFns.parseISO(n);return!dateFns.isValid(t)&&(t=dateFns.parse(n,"dd/MM/yyyy",new Date),!dateFns.isValid(t))?null:t}if(!t||!n.otherModelValue)return!0;const r=i(t),u=i(n.otherModelValue);return dateFns.isAfter(r,u)||dateFns.isEqual(r,u)};n.$watch("otherModelValue",function(){r.$validate()})}}});r.directive("fileModel",["$parse",function(n){return{restrict:"A",link:function(t,i,r){var u=n(r.fileModel),f=u.assign;i.bind("change",function(){t.$apply(function(){f(t,i[0].files)})})}}}]);t&&t(r);r.controller(u,i);angular.bootstrap($(this).get(0),[n])})},initScope:function(n){n.getValue=function(n){return n?n:"-"};n.getValueAsPercentage=function(n){return n?n+"%":"-"};n.getPlainTextAsHtml=function(n){return n?n.replaceAll("\n","<br/>"):"-"};n.isZero=function(n){return Math.abs(n)<.01};n.getByteString=function(n){return String_toByteString(n)};n.isCtrlInvalid=function(n){return n&&n.$touched&&n.$invalid};n.getCtrlId=function(n,t){return n+"_"+t};n.datePickerOptions={culture:currentPage.getCurrentCulture(),size:"small",rounded:"none",fillMode:"none",format:"dd/MM/yyyy"};n.datePickerModelGetterSetter=function(n){return function(t){if(arguments.length)if(t){const i=dateFns.parse(t,"dd/MM/yyyy",new Date);dateFns.isValid(i)&&i.getFullYear()>=2e3&&n(dateFns.formatISO(i))}else t!==undefined&&n(null);return n()}};n.isCurrentIdentityCollaborator=function(){return currentIdentity.isCollaborator()};n.isCurrentIdentityManager=function(){return currentIdentity.isManager()};n.getCurrentCulture=function(){return currentPage.getCurrentCulture()};n.isITCultureGlobal=function(){return currentPage.isITCultureGlobal()}}};